# Copyright (C) 2008, 2009, 2010 EPITA Research and Development
# Laboratory (LRDE).
#
# This file is part of Olena.
#
# Olena is free software: you can redistribute it and/or modify it under
# the terms of the GNU General Public License as published by the Free
# Software Foundation, version 2 of the License.
#
# Olena is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with Olena.  If not, see <http://www.gnu.org/licenses/>.

# Illustrations from the ISMM 2009 paper.

# Find Milena headers.
AM_CPPFLAGS = -I$(top_srcdir) -I$(top_builddir)
# Produce fast code.
APPS_CXXFLAGS = @APPS_CXXFLAGS@
AM_CXXFLAGS = $(APPS_CXXFLAGS)

noinst_HEADERS = chain.hh

noinst_PROGRAMS = image2d graph complex
image2d_SOURCES = image2d.cc
graph_SOURCES = graph.cc
complex_SOURCES = complex.cc

# Input images.
# FIXME: Move them to milena/img/?
dist_noinst_DATA = seeds.pgm m283-c.off

# Output images.
noinst_DATA = lena-s.ppm graph-s.png m283-s.off
MOSTLYCLEANFILES = $(noinst_DATA) graph-s.neato

lena-s.ppm: $(top_srcdir)/img/lena.pgm image2d$(EXEEXT)
	./image2d$(EXEEXT) $< 1000 $@

graph-s.png: graph-s.neato
	neato -Tpng $< >$@
graph-s.neato: seeds.pgm graph$(EXEEXT)
	./graph$(EXEEXT) $< 2 $@

m283-s.off: m283-c.off complex$(EXEEXT)
	./complex$(EXEEXT) $< 100 $@
