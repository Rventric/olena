 \input texinfo @c -*- texinfo -*-
@c %**start of header
@setfilename oln-dev.info
@settitle Olena: a Developer's Handbook

@documentlanguage en
@documentencoding ISO-8859-1
@c @smallbook
@finalout
@afourlatex
@c @setchapternewpage odd
@copying

This document is intended to describe the Olena source tree
layout and how to use Olena from
another software project.

Copyright @copyright{} 2002 @strong{L.R.D.E.}

@end copying

@titlepage
@title Olena: a Developer's Handbook
@subtitle Edition @today
@author Rapha@"el Poss
@end titlepage

@iftex
@setcontentsaftertitlepage
@end iftex
@ifnottex
@node Top
@top Olena handbook for developers
@end ifnottex

@menu
* The Olena source tree::
* Olena configuration::
* Using Olena from another project::
* Index and Table of contents::
@end menu

@node The Olena source tree
@chapter The Olena source tree

The Olena source tree is divided into several distrinct components:

@table @file
@item top source directory
The base directory for Olena sources. It contains Autoconf/Automake definitions
that allow the following toplevel operations:
@itemize @minus
@item
creation of initial configuration files (@command{make all});
@item
installation of header files from @file{oln/} to the system (@command{make install});
@item
compilation of demonstration programs in @file{demo/} (@command{make demo} and @command{make check});
@item
compilation and execution of the testsuite from @file{tests/} (@command{make check});
@item
compilation and installation of user programs from @file{utilities/} to the system (@command{make all} and @command{make install}).
@end itemize
Note that it @emph{does not} allow generating documentations from @file{doc/}. This is
covered below.

@item tools/
Some tools used by various other build phases.

@item oln/
The Olena sources. Only C++ header files can be found in this directory and
its sub-directories.
These files are autonomous, and can be installed in any directory on the system.

@item demo/
Some demonstration C++ sources. 

@item doc/
The documentation subdirectory. Items in this directory are controlled
by an autonomous build process, i.e. they have their own Autoconf/Automake
definitions. However, these definitions rely on files located in @file{tools/}, and
use comments from the C++ sources to generate TeX sources.

@item utilities/
User-level Olena commands. Auto-generated sources in this directory yield at compilation
time a set of user shell commands exhibiting several Olena features.

@end table

You can find in the following sections a more detailed description of
the contents of each directory.

@menu
* directory tools::
* directory oln::
* directory doc::
@end menu

In addition to these directories, several toplevel files are worth of interest:

@table @file
@cindex @file{README}
@item README
First-time documentation. Introducts briefly how to use Olena.

@cindex @file{NEWS}
@item NEWS
Report main additions to Olena version by version. Updated at each release.

@cindex @file{ChangeLog}
@item ChangeLog
Report changes to Olena for each minor revision. Updated often.

@cindex @file{ISSUES}
@item ISSUES
Describes several major issues about Olena@footnote{FIXME: this information seems outdated}.

@cindex @file{THANKS}
@item THANKS
Credits. Lists people that have contributed to Olena together with their achievements@footnote{FIXME: check this}.

@cindex @file{Makefile.am}
@item Makefile.am
@cindex @file{configure.ac}
@item configure.ac
Global Automake/Autoconf control definitions.

@end table

All other files in the toplevel directory should be automatically generated.


@node directory tools
@section @file{tools/}

@cindex @file{tools/}

This directory contains several tools pertaining to the build process:

@table @file
@cindex @file{depcomp}
@item depcomp
@cindex @file{install-sh}
@item install-sh
@cindex @file{missing}
@item missing
@cindex @file{mkinstalldirs}
@item mkinstalldirs
Autoconf-related scripts (should be auto-imported by @command{autoreconf} if needed@footnote{FIXME: check this}).

@cindex @file{texinfo.tex}
@item texinfo.tex
Texinfo definitions for the documentation (should be auto-imported by @command{autoreconf} if needed@footnote{FIXME: check this}). 

@cindex @file{scandefs.pl}
@item scandefs.pl
@cindex @file{config.hh}
@cindex @file{config.hin}
@cindex @file{pconf.hh}
@cindex @file{system.hh}
@cindex @file{Makefile.am}
A perl script that extracts definitions from the @command{configure}-generated @file{oln/config/config.hh}@footnote{in turn generated
from @file{oln/config/config.hin}},
creating @file{oln/config/pconf.hh}, which is itself included by @file{oln/config/system.hh}. 
See the Automake definition file @file{oln/Makefile.am} for a description of this process.

@end table 

@cindex @file{ChangeLog}
In addition, it contains a file @file{ChangeLog} describing changes to files in this directory.

@node directory oln
@section @file{oln/}

@cindex @file{oln/}

This directory contains the main Olena sources. Each Olena component is located in
a directory grouping all components by ``categories''. Here are the subdirectories:

@table @file
@item config/
@cindex @file{system.hh}
Olena global configuration definitions, reachable by including @file{oln/config/system.hh}.
@item meta/
C++ meta-programming utilities. Here is a non-exhaustive list of components:
@itemize @minus
@item
@cindex @file{array*.hh}
static arrays (@file{array*.hh});
@item
@cindex @file{cmp.hh}
@cindex @file{ucmp.hh}
static comparisons (@file{cmp.hh} and @file{ucmp.hh});
@item
@cindex @file{control.hh}
static control structures (@file{control.hh});
@item
@cindex @file{logic.hh}
static logical operators (@file{logic.hh});
@item
@cindex @file{ufuncs.hh}
static miscellaneous intefer functions (@file{ufuncs.hh});
@item
@cindex @file{types.hh}
pervasives controlling static hierarchies (@file{types.hh}).
@end itemize

@item types/
Definitions for value types.

@item core/
Definitions for image types and various other Olena data types. This directory
contains definitions for:
@itemize @minus
@item
image types;
@item
structural element types (windows, neighborhoods);
@item
iterators;
@item
points;
@item
borders.
@end itemize

@item transforms/
Transformation operators  over images.  Includes Fast Fourier Transforms
(FFT) and Discreet Wavelets Transforms (DWT).

@item morpho/
Morphological operators.

@item level/
Level processing operators.

@item convol/
Convolution operators.

@item arith/
Arithmetical operators (over images). Covers both arithmetical, conversion and
logical operators.

@item convert/
Value types conversion functions.

@item io/
Input/Output operators for several Olena data types.

@item utils/
Utility operators.

@item math/
Utility mathematical functions.

@end table

In addition to these categories, four multi-purpose headers are provided in
@file{oln/}:

@table @file
@cindex @file{basics.hh}
@item basics.hh
recursively includes all @emph{base types} definitions from @file{core/}.

@cindex @file{basics1d.hh}
@item basics1d.hh
recursively includes all definitions from @file{core/} that allow handling of
1D images.

@cindex @file{basics2d.hh}
@item basics2d.hh
Likewise, for 2D images.

@cindex @file{basics3d.hh}
@item basics3d.hh
Likewise, for 3D images.
@end table

@node directory doc
@section @file{doc/}

@cindex @file{doc/}

This directory contains all files needed to build the documentation, except
headers files from @file{oln/}, which contain comments used in the documentation
build process.

Here is a list of the most important files:

@table @file
@cindex Makefile.am
@item doc/Makefile.am
Automake definitions that control the documentation build process.

@cindex oln-dev.texi
@item doc/oln-dev.texi
Master Texinfo source for the Olena Developer's Handbook.

@cindex oln-ref.tex
@item doc/oln-ref.tex
Master TeX source for the Olena Reference Manual.

@cindex ref-types.tex
@item doc/ref-types.tex
Handwritten documentation about Olena value types, included in the Reference Manual.

@cindex ref-morpho.tex
@item doc/ref-morpho.tex
@cindex ref-level.tex
@item doc/ref-level.tex
TeX sources describing Olena components. They are auto-generated by AutoGen from
Olena C++ header files@footnote{more precisely, from C++ comments}, using
definitions in @file{tpl/processing.tpl}.

@item doc/bin/
Auto-generated programs that create the pictures included in the Reference Manual.

@item doc/html/
The HTML version of the Reference Manual.

@item tpl/processing.tpl
AutoGen parameters for generating parts of the Reference Manual.

@item img/
A directory containing images used for example purposes in the Reference Manual@footnote{FIXME: isn't this redundant with the
toplevel img/ directory?}.

@end table

@cindex @file{texinfo.tex}
Running @command{make all} in the @file{doc/} toplevel subdirectory
generates the Reference Manual and the Developer's Handbook. To achieve
this goal, it uses the Olena headers it can find in @file{../oln} and
the Texinfo source @file{../tools/texinfo.tex}@footnote{FIXME: since
this is the only dependency over @file{texinfo.tex}, and since no other
file in Olena uses @file{texinfo.tex}, shouldn't this file be moved into
@file{doc/}?}.


@node Olena configuration
@chapter Olena configuration



@node Using Olena from another project
@chapter Using Olena from another project

@node Index and Table of contents
@unnumbered Index and Table of contents

@printindex cp

@contents


@bye
