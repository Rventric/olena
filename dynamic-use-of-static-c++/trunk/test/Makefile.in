CXX = @@COMPILE@@ -Ifixtures

<%-
TESTS = %w[
  function_loader
  containers
  damien
  var_and_val
  methods
  olena
]
-%>

<%- TESTS.each do |name| -%>

<%= name %>: test_<%= name %>.o
	@@LINK@@ test_<%= name %>.lo @@LIBDYNARG@@ -o test_<%= name %>
	./test_<%= name %>

<%- end -%>

vaucanson:
	cd vaucanson && $(MAKE) check

check: <%= TESTS.join(' ') %>

clean:
	rm -f <%= TESTS.map{|x| 'test_' + x}.join(' ') %>
	rm -f *.o *.lo

repository_clean: clean
	rm -rf repository
