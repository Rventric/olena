CC = @@CXX@@
CXX = @@CXX@@
CXXFLAGS = @@CFLAGS@@ -I@@SRCDIR@@ -Ifixtures
LDFLAGS = @@LIBRUBYARG@@

<%-
TESTS = %w[
  function_loader
  containers
  damien
  olena
  var_and_val
]
-%>


<%- TESTS.each do |name| -%>

<%= name %>: test_<%= name %>.o test_<%= name %>
	./test_<%= name %> || false

<%- end -%>

vaucanson:
	cd vaucanson && $(MAKE) check

check: <%= TESTS.join(' ') %>

clean:
	rm -f <%= TESTS.map{|x| 'test_' + x}.join(' ') %>
	rm -f *.o

repository_clean: clean
	rm -rf repository
