							// -*- C++ -*-
#include "data.hh"
#include <oln/utils/md5.hh>

#include <ntg/bin.hh>
#include <oln/io/read_image.hh>
#include <oln/basics2d.hh>
#include <oln/morpho/hit_or_miss.hh>

using namespace oln;

bool check()
{
  utils::key::value_type data_key[16] =
    { 0x11, 0x78, 0x96, 0x7f, 0x20, 0xab, 0xb1, 0xad,
      0x3c, 0x39, 0xef, 0x56, 0xf0, 0x12, 0x59, 0x1 } ;
  utils::key key(data_key);

  image2d<ntg::bin> ima;
  ima = io::read(rdata("object.pbm"));

  oln::window2d win1;
  win1
    .add(-3,-2).add(-3,-1).add(-3,0).add(-3,1).add(-3,2)
    .add(-2,-1).add(-2,0).add(-2,1)
    .add(-1,0);
  oln::window2d win2 = -win1;

  if (utils::md5(morpho::hit_or_miss(ima, win1, win2)) != key)
    return true;

  return false;
}
