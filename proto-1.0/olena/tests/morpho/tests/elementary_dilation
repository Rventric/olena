							// -*- C++ -*-
#include "data.hh"
#include <oln/utils/md5.hh>

#include <oln/io/read_image.hh>
#include <oln/basics2d.hh>
#include <oln/morpho/elementary_dilation.hh>
#include <oln/level/compare.hh>
#include <ntg/all.hh>

using namespace oln;

bool check()
{
  // MD5 sum of 16x16.pbm's elementary dilation result.
  utils::key::value_type data_key[16] =
    { 0x1e, 0x6d, 0x61, 0x22, 0xd1, 0x79, 0x76, 0x73,
      0xe0, 0xf2, 0xf3, 0xc, 0xc4, 0x7b, 0x8d, 0x95 };
  utils::key key(data_key);

  typedef image2d<ntg::bin> im_type;
  im_type ima;
  ima = io::read(rdata("16x16.pbm"));

  if (utils::md5(morpho::elementary_dilation(join(ima, neighb_c4()))) != key)
    return true;

  return false;
}
