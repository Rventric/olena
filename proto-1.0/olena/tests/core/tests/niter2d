							// -*- C++ -*-
#include <iostream>

#include "ntg/all.hh"
#include "oln/basics2d.hh"
#include "oln/core/gen/image_with_nbh.hh"

#include "check.hh"
#include "data.hh"

bool check()
{
  oln::image2d<int> ima_without_nbh(10, 10);
  oln::image_with_nbh<oln::image2d<int>, oln::neighborhood2d> ima =
    oln::join(ima_without_nbh, oln::neighb_c4());
  int cpt = 0;

  oln::fwd_piter2d fwd_it(ima.size());
  for_all_p (fwd_it)
  {
    oln::fwd_niter2d fwd_nit(ima);
    for_all_n_of_p (fwd_nit, fwd_it)
      cpt++;
  }

  if (cpt != 400)
    return true;

  cpt = 0;
  for_all_p (fwd_it)
  {
    oln::bkd_niter2d bkd_nit(ima);
    for_all_n_of_p (bkd_nit, fwd_it)
      cpt++;
  }

  if (cpt != 400)
    return true;

  return false;
}
